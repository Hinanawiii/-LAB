class InvertedIndexWriter(InvertedIndex):
    """"""
    def __enter__(self):
        self.index_file = open(self.index_file_path, 'wb+')              
        return self

    def append(self, term, postings_list):
        """Appends the term and postings_list to end of the index file.
        
        This function does three things, 
        1. Encodes the postings_list using self.postings_encoding
        2. Stores metadata in the form of self.terms and self.postings_dict
           Note that self.postings_dict maps termID to a 3 tuple of 
           (start_position_in_index_file, 
           number_of_postings_in_list, 
           length_in_bytes_of_postings_list)
        3. Appends the bytestream to the index file on disk

        Parameters
        ----------
        term:
            term or termID is the unique identifier for the term
        postings_list: List[Int]
            List of docIDs where the term appears
        """
        ### Begin your code
        # 记录当前文件位置
        start_position = self.index_file.tell()
        
        # 编码 postings_list
        encoded_postings = ','.join(map(str, postings_list)).encode('utf-8')
        
        # 记录元数据
        self.postings_dict[term] = (start_position, len(postings_list), len(encoded_postings))  # 使用字典赋值
        self.terms.append(term)
        
        # 将编码后的数据写入文件
        self.index_file.write(encoded_postings + b'\n')
        ### End your code